<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layer 4 Manifold Benchmark Dashboard</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@1.0.1/dist/chartjs-adapter-moment.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .dashboard-header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .dashboard-header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .dashboard-header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
        }
        
        .status-bar {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            backdrop-filter: blur(10px);
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .status-green {
            background-color: #27ae60;
        }
        
        .status-yellow {
            background-color: #f39c12;
        }
        
        .status-red {
            background-color: #e74c3c;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .dashboard-container {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        
        .metric-card h3 {
            color: #34495e;
            font-size: 1.1em;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .metric-unit {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .metric-trend {
            margin-top: 10px;
            font-size: 0.9em;
        }
        
        .trend-up {
            color: #27ae60;
        }
        
        .trend-down {
            color: #e74c3c;
        }
        
        .trend-stable {
            color: #f39c12;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .chart-title {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }
        
        .controls {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .control-group label {
            font-weight: bold;
            color: #34495e;
            font-size: 0.9em;
        }
        
        select, button {
            padding: 8px 15px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            background: white;
            font-size: 0.9em;
            transition: border-color 0.3s ease;
        }
        
        select:focus, button:focus {
            outline: none;
            border-color: #3498db;
        }
        
        button {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }
        
        button:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
        }
        
        .data-table {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }
        
        th {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .atlas-row {
            background-color: #e8f4fd !important;
        }
        
        .traditional-row {
            background-color: #fff3e0 !important;
        }
        
        .conservation-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.8em;
        }
        
        .compliant {
            background-color: #d5f4e6;
            color: #0f5132;
        }
        
        .non-compliant {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .regression-alert {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }
        
        .last-updated {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 20px;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .dashboard-header h1 {
                font-size: 2em;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 10px;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .metric-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-header">
        <h1>üî¨ Layer 4 Manifold Benchmark Dashboard</h1>
        <p class="subtitle">Real-time Performance Monitoring & Analysis</p>
    </div>
    
    <div class="status-bar">
        <div class="status-item">
            <div class="status-indicator status-green" id="conservation-status"></div>
            <span>Conservation Laws: <span id="conservation-compliance">100%</span></span>
        </div>
        <div class="status-item">
            <div class="status-indicator status-green" id="performance-status"></div>
            <span>Performance: <span id="performance-trend">Optimal</span></span>
        </div>
        <div class="status-item">
            <div class="status-indicator status-yellow" id="memory-status"></div>
            <span>Memory Usage: <span id="memory-usage">Moderate</span></span>
        </div>
        <div class="status-item">
            <div class="status-indicator status-green" id="system-status"></div>
            <span>System Health: <span id="system-health">Good</span></span>
        </div>
    </div>
    
    <div class="dashboard-container">
        <div class="regression-alert" id="regression-alert">
            ‚ö†Ô∏è Performance regression detected in recent benchmarks! Check the detailed analysis below.
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label for="time-range">Time Range</label>
                <select id="time-range">
                    <option value="24h">Last 24 Hours</option>
                    <option value="7d" selected>Last 7 Days</option>
                    <option value="30d">Last 30 Days</option>
                    <option value="90d">Last 90 Days</option>
                </select>
            </div>
            <div class="control-group">
                <label for="operation-filter">Operation Type</label>
                <select id="operation-filter">
                    <option value="all" selected>All Operations</option>
                    <option value="atlas">Atlas Only</option>
                    <option value="traditional">Traditional Only</option>
                    <option value="projection">Projections</option>
                    <option value="shard">Shard Operations</option>
                </select>
            </div>
            <div class="control-group">
                <label>&nbsp;</label>
                <button onclick="refreshData()">üîÑ Refresh Data</button>
            </div>
            <div class="control-group">
                <label>&nbsp;</label>
                <button onclick="exportReport()">üìä Export Report</button>
            </div>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <h3>Peak Performance</h3>
                <div class="metric-value" id="peak-ops">2,847</div>
                <div class="metric-unit">ops/sec</div>
                <div class="metric-trend trend-up" id="peak-trend">‚Üó +12.5% from last week</div>
            </div>
            <div class="metric-card">
                <h3>Max Throughput</h3>
                <div class="metric-value" id="max-throughput">156.3</div>
                <div class="metric-unit">MB/s</div>
                <div class="metric-trend trend-up" id="throughput-trend">‚Üó +8.2% from last week</div>
            </div>
            <div class="metric-card">
                <h3>Average Speedup</h3>
                <div class="metric-value" id="avg-speedup">3.2x</div>
                <div class="metric-unit">vs Traditional</div>
                <div class="metric-trend trend-stable" id="speedup-trend">‚Üí Stable</div>
            </div>
            <div class="metric-card">
                <h3>Conservation Rate</h3>
                <div class="metric-value" id="conservation-rate">99.7%</div>
                <div class="metric-unit">compliance</div>
                <div class="metric-trend trend-up" id="conservation-trend">‚Üó +0.3% improvement</div>
            </div>
        </div>
        
        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">Performance Trends</div>
                <canvas id="performanceChart" width="400" height="200"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Throughput Comparison</div>
                <canvas id="throughputChart" width="400" height="200"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Speedup Analysis</div>
                <canvas id="speedupChart" width="400" height="200"></canvas>
            </div>
            <div class="chart-container">
                <div class="chart-title">Memory Efficiency</div>
                <canvas id="memoryChart" width="400" height="200"></canvas>
            </div>
        </div>
        
        <div class="data-table">
            <h2 style="margin-bottom: 20px; color: #2c3e50;">Recent Benchmark Results</h2>
            <table id="results-table">
                <thead>
                    <tr>
                        <th>Timestamp</th>
                        <th>Operation</th>
                        <th>Type</th>
                        <th>Avg Time (ms)</th>
                        <th>Ops/Sec</th>
                        <th>Throughput (MB/s)</th>
                        <th>Conservation</th>
                        <th>Speedup</th>
                    </tr>
                </thead>
                <tbody id="results-body">
                    <!-- Data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
        
        <div class="last-updated">
            Last updated: <span id="last-updated-time">-</span>
        </div>
    </div>
    
    <script>
        // Dashboard state
        let dashboardData = {
            metrics: {},
            charts: {},
            filters: {
                timeRange: '7d',
                operationType: 'all'
            }
        };
        
        // Chart configurations
        const chartConfig = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'top'
                }
            },
            scales: {
                x: {
                    type: 'time',
                    time: {
                        unit: 'hour'
                    }
                },
                y: {
                    beginAtZero: true
                }
            }
        };
        
        // Initialize charts
        let performanceChart, throughputChart, speedupChart, memoryChart;
        
        function initializeCharts() {
            const ctx1 = document.getElementById('performanceChart').getContext('2d');
            const ctx2 = document.getElementById('throughputChart').getContext('2d');
            const ctx3 = document.getElementById('speedupChart').getContext('2d');
            const ctx4 = document.getElementById('memoryChart').getContext('2d');
            
            performanceChart = new Chart(ctx1, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Atlas Operations',
                        data: generateMockTimeSeriesData('atlas_ops'),
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Traditional Operations',
                        data: generateMockTimeSeriesData('traditional_ops'),
                        borderColor: '#e67e22',
                        backgroundColor: 'rgba(230, 126, 34, 0.1)',
                        tension: 0.4
                    }]
                },
                options: chartConfig
            });
            
            throughputChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['Linear Projection', 'R96 Fourier', 'Shard Extract', 'Batch Extract', 'Transform', 'Reconstruct'],
                    datasets: [{
                        label: 'Atlas (MB/s)',
                        data: [145.2, 132.8, 89.5, 156.3, 78.9, 67.4],
                        backgroundColor: 'rgba(52, 152, 219, 0.8)'
                    }, {
                        label: 'Traditional (MB/s)',
                        data: [45.6, 38.2, 28.7, 52.1, 31.4, 22.8],
                        backgroundColor: 'rgba(230, 126, 34, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });
            
            speedupChart = new Chart(ctx3, {
                type: 'horizontalBar',
                data: {
                    labels: ['Linear Projection', 'R96 Fourier', 'Shard Extract', 'Batch Extract', 'Transform', 'Reconstruct'],
                    datasets: [{
                        label: 'Speedup Factor',
                        data: [3.2, 3.5, 3.1, 3.0, 2.5, 2.9],
                        backgroundColor: [
                            'rgba(46, 204, 113, 0.8)',
                            'rgba(52, 152, 219, 0.8)',
                            'rgba(155, 89, 182, 0.8)',
                            'rgba(241, 196, 15, 0.8)',
                            'rgba(230, 126, 34, 0.8)',
                            'rgba(231, 76, 60, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            memoryChart = new Chart(ctx4, {
                type: 'doughnut',
                data: {
                    labels: ['Atlas Efficient', 'Traditional Overhead', 'System Reserved'],
                    datasets: [{
                        data: [65, 25, 10],
                        backgroundColor: [
                            'rgba(46, 204, 113, 0.8)',
                            'rgba(230, 126, 34, 0.8)',
                            'rgba(149, 165, 166, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        function generateMockTimeSeriesData(type) {
            const now = new Date();
            const data = [];
            const basePerformance = type === 'atlas_ops' ? 2000 : 650;
            const variance = type === 'atlas_ops' ? 400 : 150;
            
            for (let i = 0; i < 24; i++) {
                const timestamp = new Date(now.getTime() - (23 - i) * 60 * 60 * 1000);
                const value = basePerformance + (Math.random() - 0.5) * variance;
                data.push({
                    x: timestamp,
                    y: Math.max(0, value)
                });
            }
            
            return data;
        }
        
        function updateTable() {
            const tbody = document.getElementById('results-body');
            const mockData = [
                {
                    timestamp: new Date(Date.now() - 5 * 60 * 1000),
                    operation: 'R96 Fourier Projection (1 MB)',
                    type: 'Atlas',
                    avgTime: 3.247,
                    opsPerSec: 2847,
                    throughput: 132.8,
                    conservation: true,
                    speedup: 3.5
                },
                {
                    timestamp: new Date(Date.now() - 15 * 60 * 1000),
                    operation: 'Batch Shard Extraction (16 MB, 8 shards)',
                    type: 'Atlas',
                    avgTime: 12.584,
                    opsPerSec: 1264,
                    throughput: 156.3,
                    conservation: true,
                    speedup: 3.0
                },
                {
                    timestamp: new Date(Date.now() - 22 * 60 * 1000),
                    operation: 'Traditional Matrix Operation (1 MB)',
                    type: 'Traditional',
                    avgTime: 11.382,
                    opsPerSec: 814,
                    throughput: 38.2,
                    conservation: false,
                    speedup: 1.0
                },
                {
                    timestamp: new Date(Date.now() - 35 * 60 * 1000),
                    operation: 'Linear Projection (4 MB)',
                    type: 'Atlas',
                    avgTime: 8.956,
                    opsPerSec: 2156,
                    throughput: 145.2,
                    conservation: true,
                    speedup: 3.2
                },
                {
                    timestamp: new Date(Date.now() - 48 * 60 * 1000),
                    operation: 'Transformation (64 KB)',
                    type: 'Atlas',
                    avgTime: 1.847,
                    opsPerSec: 1895,
                    throughput: 78.9,
                    conservation: true,
                    speedup: 2.5
                }
            ];
            
            tbody.innerHTML = '';
            
            mockData.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = row.type === 'Atlas' ? 'atlas-row' : 'traditional-row';
                
                tr.innerHTML = `
                    <td>${row.timestamp.toLocaleTimeString()}</td>
                    <td>${row.operation}</td>
                    <td>${row.type}</td>
                    <td>${row.avgTime.toFixed(3)}</td>
                    <td>${row.opsPerSec.toLocaleString()}</td>
                    <td>${row.throughput.toFixed(1)}</td>
                    <td><span class="conservation-status ${row.conservation ? 'compliant' : 'non-compliant'}">
                        ${row.conservation ? '‚úì Compliant' : '‚úó Non-compliant'}
                    </span></td>
                    <td>${row.speedup.toFixed(1)}x</td>
                `;
                
                tbody.appendChild(tr);
            });
        }
        
        function updateMetrics() {
            // Simulate real-time metric updates
            const metrics = {
                peakOps: 2847 + Math.floor(Math.random() * 100 - 50),
                maxThroughput: 156.3 + Math.random() * 10 - 5,
                avgSpeedup: 3.2 + Math.random() * 0.4 - 0.2,
                conservationRate: 99.7 + Math.random() * 0.6 - 0.3
            };
            
            document.getElementById('peak-ops').textContent = metrics.peakOps.toLocaleString();
            document.getElementById('max-throughput').textContent = metrics.maxThroughput.toFixed(1);
            document.getElementById('avg-speedup').textContent = metrics.avgSpeedup.toFixed(1) + 'x';
            document.getElementById('conservation-rate').textContent = metrics.conservationRate.toFixed(1) + '%';
        }
        
        function updateStatusBar() {
            const conservationRate = 99.7 + Math.random() * 0.6 - 0.3;
            document.getElementById('conservation-compliance').textContent = conservationRate.toFixed(1) + '%';
            
            // Update status indicators based on metrics
            const conservationStatus = document.getElementById('conservation-status');
            if (conservationRate > 95) {
                conservationStatus.className = 'status-indicator status-green';
            } else if (conservationRate > 90) {
                conservationStatus.className = 'status-indicator status-yellow';
            } else {
                conservationStatus.className = 'status-indicator status-red';
            }
        }
        
        function refreshData() {
            console.log('Refreshing dashboard data...');
            updateMetrics();
            updateStatusBar();
            updateTable();
            
            // Update charts with new data
            performanceChart.data.datasets[0].data = generateMockTimeSeriesData('atlas_ops');
            performanceChart.data.datasets[1].data = generateMockTimeSeriesData('traditional_ops');
            performanceChart.update();
            
            // Update timestamp
            document.getElementById('last-updated-time').textContent = new Date().toLocaleString();
        }
        
        function exportReport() {
            alert('Report export functionality would generate and download a comprehensive PDF report.');
        }
        
        // Event listeners
        document.getElementById('time-range').addEventListener('change', function(e) {
            dashboardData.filters.timeRange = e.target.value;
            refreshData();
        });
        
        document.getElementById('operation-filter').addEventListener('change', function(e) {
            dashboardData.filters.operationType = e.target.value;
            // Filter table and charts based on selection
            console.log('Filtering by:', e.target.value);
        });
        
        // Initialize dashboard
        window.addEventListener('load', function() {
            initializeCharts();
            updateTable();
            updateMetrics();
            updateStatusBar();
            
            // Update timestamp
            document.getElementById('last-updated-time').textContent = new Date().toLocaleString();
            
            // Auto-refresh every 30 seconds
            setInterval(refreshData, 30000);
            
            // Simulate occasional regression alert
            if (Math.random() < 0.3) {
                document.getElementById('regression-alert').style.display = 'block';
            }
        });
    </script>
</body>
</html>